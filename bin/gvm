#!/usr/bin/env bash

set -e

install_requirements() {
    local platform=$(uname -s)
    if [[ $platform == "Linux" ]]
    then
        apt-get --version &> /dev/null
        local apt_get_found=$(("$?" == 0))
        if $apt_get_found
        then
            sudo apt-get install curl git mercurial make binutils bison gcc build-essential
        fi
    fi
}

if [[ ! -d $HOME/.gvm ]]
then
    install_requirements
    bash < <(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer)
else
    # This script must be overridden by the original gvm
    echo "Don't use this!"
    exit 1
fi
