#!/bin/bash

set -e

open-command() {
    if [[ $OSTYPE == "linux-gnu" ]]; then
        echo "xdg-open"
    elif [[ $OSTYPE == "darwin" ]]; then
        echo "open"
    elif [[ $OSTYPE == "cygwin" ]]; then
        echo "cygstart"
    else
        echo "start"
    fi
}

install-java() {
    local open=$(open-command)
    $open "www.oracle.com/technetwork/java/javase/downloads/index.html"
}

install-ant() {
    local open=$(open-command)
    $open http://ant.apache.org/bindownload.cgi
}

install-scala() {
    local path=/usr/local/scala
    if [[ ! -d $path ]]; then
        sudo git clone https://github.com/scala/scala $path
        cd $path
        ant build-opt
    fi
}

install-sbt() {
    local open=$(open-command)
    $open http://www.scala-sbt.org/download.html
}

install-rbenv() {
    local path=$HOME/.rbenv
    if [[ -d  $path ]]; then
        cd $path
        git pull
    else
        git clone https://sstephenson/rbenv ~/.rbenv
    fi
}

install-pyenv() {
    local path=$HOME/.pyenv
    if [[ -d $path ]]; then
        cd $path
        git pull
    else
        git clone https://github.com/yyuu/pyenv.git ~/.pyenv
    fi
}

install-go() {
    local open=$(open-command)
    $open "https://golang.org/doc/install"
}

install-antigen() {
    local path=$HOME/.antigen
    if [[ -d $path ]]; then
        cd $path
        git pull
    else
        git clone https://github.com/zsh-users/antigen $path
    fi
}

install-neovim() {
    local path=$HOME/projects/neovim
    if [[ ! -d $path ]]; then
        install-neovim-deps
        git clone https://github.com/neovim/neovim $path
        cd $path
        make install
    fi
}

install-neovim-deps() {
    if [[ $OSTYPE == "linux-gnu" ]]; then
        sudo apt-get install libtool libtool-bin autoconf automake cmake
        sudo apt-get install libncurses5--dev g++ pkg-config unzip
    fi
}

install-gnome-terminal-colors-solarized() {
    if [[ $OSTYPE == "linux-gnu" ]]; then
        sudo apt-get install dconf-cli
    fi
    local name=gnome-terminal-colors-solarized
    local path=$HOME/projects/$name
    git clone https://github.com/Anthony25/$name $path
    cd $path
    ./install.sh
}

install-powerline-fonts() {
    local path=$HOME/projects/fonts
    if [[ -d $path ]]; then
        cd $path
        git pull
    else
        git clone https://github.com/powerline/fonts $path
        cd $path
    fi
    ./install.sh
}

install-idea() {
    local open=$(open-command)
    $open https://www.jetbrains.com/idea/download/
}

for target in $@; do
    install-$target
done
